---
interface Props {
  audioSrc: string;
  title?: string;
}

const { audioSrc, title = 'Titre du beat' } = Astro.props;
---

<div class="fixed bottom-0 left-0 right-0 bg-gray-900 text-white p-4 shadow-lg">
  <div class="container mx-auto flex items-center justify-between">
    <div class="flex items-center space-x-4">
      <div class="w-12 h-12 bg-gray-700 rounded">
        <!-- Placeholder pour la pochette -->
      </div>
      <div>
        <div class="font-medium">{title}</div>
        <div class="text-sm text-gray-400">MokingJayy</div>
      </div>
    </div>
    
    <div class="flex-1 max-w-2xl mx-8">
      <div class="flex items-center justify-center space-x-4">
        <button class="text-white hover:text-secondary transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z" />
          </svg>
        </button>
        <button class="bg-white text-black rounded-full w-10 h-10 flex items-center justify-center hover:bg-secondary hover:text-white transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </button>
        <button class="text-white hover:text-secondary transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z" />
          </svg>
        </button>
      </div>
      <div class="mt-2 flex items-center space-x-2">
        <span class="text-xs text-gray-400 w-10">0:00</span>
        <div class="flex-1 h-1 bg-gray-700 rounded-full overflow-hidden">
          <div class="bg-secondary h-full w-1/3"></div>
        </div>
        <span class="text-xs text-gray-400 w-10">3:45</span>
      </div>
    </div>
    
    <div class="flex items-center space-x-4">
      <button class="text-white hover:text-secondary transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" />
        </svg>
      </button>
      <button class="text-white hover:text-secondary transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path d="M10 2a1 1 0 011 1v1.323l3.954 1.582 1.598-.8a1 1 0 01.894 1.79l-1.233.616 1.738 4.733a1 1 0 01-1.84.774l-1.38-3.76-3.618 1.447a1 1 0 01-.73-1.853l1.98-.792V3a1 1 0 011-1z" />
          <path d="M5 5a1 1 0 00-1 1v10.382a1 1 0 00.553.894l4 2a1 1 0 00.894 0l4-2a1 1 0 00.553-.894V6a1 1 0 00-1-1H5z" />
        </svg>
      </button>
      <div class="w-8 h-8 bg-gray-700 rounded-full"></div>
    </div>
  </div>
  
  <!-- Élément audio caché -->
  <audio id="audio-player" src={audioSrc} preload="metadata" class="hidden"></audio>
</div>

<script>
  // Script pour gérer la lecture audio
  document.addEventListener('DOMContentLoaded', () => {
    const audioPlayer = document.getElementById('audio-player');
    const playPauseBtn = document.querySelector('.play-pause-btn');
    
    if (playPauseBtn && audioPlayer) {
      playPauseBtn.addEventListener('click', () => {
        if (audioPlayer.paused) {
          audioPlayer.play();
          playPauseBtn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          `;
        } else {
          audioPlayer.pause();
          playPauseBtn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          `;
        }
      });
    }
  });
</script>

<style>
  .play-pause-btn {
    transition: all 0.3s ease;
  }
  .play-pause-btn:hover {
    transform: scale(1.1);
  }
</style>
